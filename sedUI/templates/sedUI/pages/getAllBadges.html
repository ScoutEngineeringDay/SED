{% extends "sedUI/base/header.html" %}
{% load staticfiles %}
{% block content %}
  <div align="center">
    <button class="btn btn-primary btn-lg" id="savebadges">Download Badges</button>
  </div>
  <br>
  <div id="scoutbadges" class="container">

      {% for key,values in data.items %}
        {{ key }}
        <div class="container-fluid scoutbadge" id="scoutbadge" style="position: relative">
          {% for k,v in values.items %}
            {% if k == "scout" %}
              <!-- Medical -->
              {% if v.scout_medical or v.scout_allergy %}
                <div class="badge-top-left" id="medical">M</div>
              {% endif %}
              <!-- Photo -->
              {% if v.scout_photo %}
                <div class="badge-top-right" id="noPhoto">P</div>
              {% endif %}
              <div class="badge-center">
                <font size="6">{{v.scout_first_name}} {{v.scout_last_name}}</font><br/>
                <font size="5">ID: {{v.scout_id}}</font>
              </div>
              <div class="badge-bottom-left" id="qrcode{{v.scout_id}}"></div>
              
              <script type="text/javascript" src="{% static '/js/jquery.qrcode.min.js' %}"></script>
              <script>jQuery('#qrcode{{v.scout_id}}').qrcode({
                  render  : "canvas",
                  text  : location.protocol + '//' + location.hostname + (location.port ? ':' + location.port: '') + "/scout_detail/{{ v.scout_id }}",
                  width: 85,
                  height: 85
                });
              </script>
            {% endif %}
            <div class="badge-bottom-right">
            
            <p>
            {% if k == "workshop_1"%}
              {% if v %}
                {{ v }}  
              {% endif %}
            {% endif %}
            </p>
            <p>
            {% if k == "workshop_2" %}
              {% if v %}
                {{ v }}
              {% endif %}
            {% endif %}
            </p>
            </div>
          {% endfor %}</div>
        {% endfor %}</div>

        
        
      
	
  
  <script type="text/javascript" src="{% static '/js/jspdf.debug.js' %}"></script>
  <script type="text/javascript" src="{% static '/js/html2canvas.js' %}"></script>
  <script>
    $( document ).ready(function() {
      $('#savebadges').click(function () {
        html2canvas($("#scoutbadges"), {
          background :'#FFFFFF',
          onrendered: function(canvas) {
              // canvas is the final rendered <canvas> element
              var imgData = canvas.toDataURL("image/jpeg");
              var pdf = new jsPDF();

              pdf.addImage(imgData, 'JPEG', 10, 10);
              pdf.save("scoutbadge.pdf");
          }
        });
      });
    });
  </script>
{% endblock %}
